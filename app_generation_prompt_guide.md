# 가계부 앱 개발을 관통하는 프롬프트(지시문) 엔지니어링 가이드

본 문서는 `sosucouple-budget` 가계부 웹앱(PWA) 프로젝트의 성공적인 구축 및 대규모 개선 과정을 복기하여, **향후 새로운 앱 제작 시 AI에게 어떻게 지시(Prompting)해야 가장 명쾌하고 완벽한 결과물을 얻을 수 있는지**를 정리한 가이드입니다.

---

## 🚀 완벽한 앱 뼈대 세우는 초기 지시법

앱의 골격을 만들 때는 모호한 기능 요구보다 **화면별 구조와 기술 스택, 디자인 컨셉**을 명확하게 정의하는 것이 중요합니다.

### 📌 추천 초기 프롬프트 템플릿
> "바닐라 HTML/JS/TailwindCSS를 사용하여 '모바일 앱(PWA)' 환경에 최적화된 [앱 목적: 커플 가계부] 웹앱을 만들어주세요.
> 1. **화면 구성**: 홈 화면 (대시보드), 내역 추가 모달, 달력 화면, 통계 화면, 설정 화면으로 구성.
> 2. **기술 스택**: 외부 패키지 떡칠을 피하고, SPA처럼 동작하도록 별도 HTML 이동 없이 JS로 뷰를 전환하거나(또는 완벽하게 분리된 HTML 간 이동 시 네비게이션 고정), 기본은 `localStorage` 저장소로 임시 구성할 것.
> 3. **디자인 컨셉**: Dark Theme 기본, 메인 포인트 컬러는 네온 그린(#13ec5b), 배경은 아주 어두운 그린(#102216), 텍스트는 밝은 회색 계열로. 심플하고 'Hip'한 프리미엄 금융 앱.
> 4. **레이아웃**: 뷰포트를 모바일 기기에 완벽히 맞추고(`h-[100dvh]`), 하단에 5개 아이콘의 고정형(Fixed) 탭 메뉴 배치."

---

## 🎨 UI/UX 디테일 및 모바일 겹침/여백 제어 지시법

모바일 환경에서의 UI 겹침이나 화면이 주소창 등에 밀려 삐져나가는 현상을 잡기 위해선 다음과 같이 **디테일한 CSS 요구사항**을 붙이는 것이 좋습니다.

### 📌 추천 UI 디테일 제어 프롬프트
> "모바일 하단 네비게이션이 마지막 컨텐츠(예: 저장하기 버튼)를 가리는 문제가 있습니다. 
> 1. 뼈대가 되는 모든 HTML의 기본 레이아웃을 `flex flex-col h-[100dvh]`로 잡으세요 (`min-h-screen` 지양, 사파리/모바일 주소창 버그 방어).
> 2. 가장 아래 자리하는 '버튼 컨테이너'에는 네비게이션 높이를 고려해 `pb-24` 정도로 추가 여유 공간을 주세요.
> 3. 불필요한 스크롤바가 생기지 않도록 `no-scrollbar` 클래스를 커스텀 CSS로 적용해주세요."

---

## 🤖 외부 API 연동 (Gemini 등) 및 비즈니스 로직 제어

특정 AI 리뷰 기능이나 외부 API를 연동할 때는 **유저의 동선(Flow)과 에러, 캐싱 처리**를 한 큐에 요구해야 합니다.

### 📌 추천 비즈니스 플로우 프롬프트
> "Gemini 2.5 Flash 기반의 이번 달 지출 리포트 생성 기능을 추가해주세요.
> - **프롬프트 전략**: 단순히 내역 나열이 아닌, [단점 지적, 칭찬, 재밌는 비유]를 섞어 '뼈 때리는 동네 형' 컨셉으로 리뷰.
> - **레이아웃**: 결과는 즉시 표시 없이 버튼 클릭 시 풀스크린 팝업창(모달)으로 애니메이션 효과와 함께 띄울 것.
> - **비용/UX 제어 핵심 로직**:
>   1) 매월 최초 생성 후 스토리지(캐시)에 즉각 결과물(html) 반영. 매번 다시 로딩하지 않도록. 
>   2) '현재 진행 중인 월(Month)'은 예외 처리하고 **"다음 달 1일부터 리포트가 열립니다"** 메시지로 잠글 것.
>   3) `<canvas>`나 `html2canvas`로 리포트를 PNG 모바일 사진첩에 캡처 다운로드할 수 있도록 기능 적용.
>   4) 다운로드를 수행한 사람과 안 한 사람의 버튼/텍스트 피드백 상태를 분기(다운로드 미실행 유도 등)할 것."

---

## 🗂 공통 컴포넌트 관리 및 다중 파일 수정 지시
코드를 다루는 AI는 가끔 페이지 배분(stats/settings/calendar) 시 컴포넌트를 누락하는 경우가 있습니다. 

### 📌 다중 파일 수정 지시법 (매우 중요)
> "하단 메뉴바, [결제자 선택 카메라 모달] 같은 공용 컨텍스트가 여러 파일에 복사되어 있습니다.
> 앞으로 하단 카메라 탭바 로직이 변경되면 [index.html], [stats.html], [settings.html], [calendar.html]의 하단 `<nav>`와 하위 모달 마크업 전체가 **100% 문맥상 일치(Consistency)하도록** 각각 수정 후 검열해주세요."

---

## 💡 요약: AI 코딩 메타 전략
1. **Top-Down 요구사항 정리**: 백엔드를 구축하기 전, 바닐라 `localStorage`만으로 동선이 100% 작동하게 만든 후 그제서야 Supabase 등 DB 단계로 넘어가야 합니다.
2. **구체적 명사/동사 사용**: "잘 안 보여요" 보다는 "버튼 하단이 잘리니 `add.html` 부모 컨테이너 하단 패딩을 `pb-6`에서 `pb-12`로 늘려주세요"가 무조건 한 번에 성공합니다.
3. **Red Team 검수 요청**: 큰 작업을 마친 후에는 꼭 "스스로 취약점이나 에지 케이스(Edge case)가 없는지 레드팀(Red Team) 모드로 리뷰하고 보완해 줘"라고 요구하여 광클릭 연타 에러나 0원 입력 등을 사전에 방어하세요.
