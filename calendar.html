<!doctype html><html class='dark' lang='ko'><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'><title>월간 달력</title><link href='https://fonts.googleapis.com/css2?family=Manrope:wght@400;700;800&display=swap' rel='stylesheet'><script src='https://cdn.tailwindcss.com'></script></head><body class='bg-[#102216] text-slate-100' style='font-family:Manrope,sans-serif'><div class='max-w-md mx-auto min-h-screen pb-24 px-4 pt-8'><div class='flex items-center justify-between mb-4'><button id='prev' class='px-2'>◀</button><h1 id='title' class='font-bold text-xl'></h1><button id='next' class='px-2'>▶</button></div><div class='bg-[#1c2e22] rounded-2xl p-4 mb-3 border border-[#2a4232]'><div class='text-slate-400 text-sm'>이번 달 총 지출</div><div id='monthly' class='text-3xl font-extrabold'>0원</div></div><div class='grid grid-cols-7 text-center text-xs text-slate-400 mb-1'><div>일</div><div>월</div><div>화</div><div>수</div><div>목</div><div>금</div><div>토</div></div><div id='cal' class='grid grid-cols-7 gap-1'></div></div><nav class='fixed bottom-0 inset-x-0 bg-[#15231a] border-t border-[#2a4232]'><div class='max-w-md mx-auto grid grid-cols-4 py-3 text-center text-sm font-semibold'><a href='/'>홈</a><a class='text-[#13ec5b]' href='/calendar'>달력</a><a href='/stats'>통계</a><a href='/add'>추가</a></div></nav><script type='module'>import {getTx,won,ym} from './app.js'; let cur=new Date(); function render(){const month=ym(cur); document.getElementById('title').textContent=`${cur.getFullYear()}년 ${cur.getMonth()+1}월`; const tx=getTx().filter(t=>t.tx_date?.startsWith(month)); const map={}; tx.forEach(t=>map[t.tx_date]=(map[t.tx_date]||0)+Number(t.amount||0)); const total=Object.values(map).reduce((a,b)=>a+b,0); document.getElementById('monthly').textContent='-'+won(total); const first=new Date(cur.getFullYear(),cur.getMonth(),1), last=new Date(cur.getFullYear(),cur.getMonth()+1,0).getDate(); const cal=document.getElementById('cal'); cal.innerHTML=''; for(let i=0;i<first.getDay();i++) cal.innerHTML+='<div class="h-16"></div>'; for(let d=1; d<=last; d++){const dt=`${month}-${String(d).padStart(2,'0')}`; cal.innerHTML+=`<div class='h-16 rounded-lg bg-[#1c2e22] border border-[#2a4232] p-1 text-center'><div>${d}</div><div class='text-[10px] text-slate-400'>${map[dt]?'-'+won(map[dt]):''}</div></div>`;}} document.getElementById('prev').onclick=()=>{cur.setMonth(cur.getMonth()-1);render();}; document.getElementById('next').onclick=()=>{cur.setMonth(cur.getMonth()+1);render();}; render();</script></body></html>
