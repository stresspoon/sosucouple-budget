<!doctype html><html class='dark' lang='ko'><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'><title>내역 추가</title><link href='https://fonts.googleapis.com/css2?family=Manrope:wght@400;700;800&display=swap' rel='stylesheet'><link href='https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap' rel='stylesheet'><script src='https://cdn.tailwindcss.com'></script></head><body class='bg-[#102216] text-slate-100' style='font-family:Manrope,sans-serif'><div class='max-w-md mx-auto min-h-screen pb-24 px-4 pt-8'><h1 class='text-xl font-bold mb-4'>내역 추가</h1><div class='bg-[#1c2e22] rounded-2xl border border-[#2a4232] p-4 mb-4'><div class='text-sm text-slate-400 mb-3'>영수증 선택 방식</div><input id='camera' type='file' accept='image/*' capture='environment' class='hidden'><input id='file' type='file' accept='image/*' class='hidden'><div class='grid grid-cols-2 gap-3 mb-3'><label for='camera' class='aspect-square rounded-2xl bg-[#15231a] border border-[#2a4232] flex flex-col items-center justify-center text-center cursor-pointer active:scale-95 transition'><span class='material-symbols-outlined text-[34px] mb-2 text-[#13ec5b]'>photo_camera</span><div class='font-bold'>사진 촬영</div><div class='text-xs text-slate-400 mt-1'>카메라로 바로 찍기</div></label><label for='file' class='aspect-square rounded-2xl bg-[#15231a] border border-[#2a4232] flex flex-col items-center justify-center text-center cursor-pointer active:scale-95 transition'><span class='material-symbols-outlined text-[34px] mb-2 text-[#13ec5b]'>upload_file</span><div class='font-bold'>영수증 업로드</div><div class='text-xs text-slate-400 mt-1'>기존 사진 선택</div></label></div><div id='picked' class='text-xs text-slate-300 mb-2'>선택된 파일 없음</div><button id='go' class='w-full py-3 rounded-xl bg-[#13ec5b] text-black font-bold'>인식 후 저장</button><div id='msg' class='text-xs text-slate-300 mt-2'></div></div></div><nav class='fixed bottom-0 inset-x-0 bg-[#15231a] border-t border-[#2a4232]'><div class='max-w-md mx-auto grid grid-cols-4 py-3 text-center text-sm font-semibold'><a href='/'>홈</a><a href='/calendar'>달력</a><a href='/stats'>통계</a><a class='text-[#13ec5b]' href='/add'>추가</a></div></nav><script type='module'>import {getKey,getTx,setTx,parseReceiptWithGemini,won} from './app.js'; const camera=document.getElementById('camera'); const file=document.getElementById('file'); const picked=document.getElementById('picked'); const msg=document.getElementById('msg'); const selected=()=>camera.files[0]||file.files[0]; const sync=()=>{const f=selected(); picked.textContent=f?`선택됨: ${f.name}`:'선택된 파일 없음';}; camera.onchange=sync; file.onchange=sync; document.getElementById('go').onclick=async()=>{const f=selected(); const key=getKey(); if(!key){msg.textContent='홈에서 API Key 먼저 저장해줘'; return;} if(!f){msg.textContent='촬영 또는 업로드 먼저 선택해줘'; return;} try{ msg.textContent='인식 중...'; const r=await parseReceiptWithGemini(f,key); const tx=getTx(); tx.push({...r, amount:Number(r.amount||0), created_at:new Date().toISOString()}); setTx(tx); msg.textContent=`저장됨: ${r.merchant||'미분류'} / ${won(r.amount)}`;}catch(e){msg.textContent='실패: '+e.message;}};</script></body></html>
